<div class="container">
  <!-- Tabs -->
  <header>
    <p (click)="reqMode()"   class="nav-link">User Requests</p>
    <p (click)="groupMode()" class="nav-link">Manage Groups</p>
  </header>

  <!-- =================== USER REQUESTS (existing) =================== -->
  <div *ngIf="currMode === 'req'" class="requests">
    <div class="user-requests">
      <h3>New User Requests</h3>

      <div class="request-row header-row">
        <div><strong>Username</strong></div>
        <div><strong>Email</strong></div>
        <div><strong>Actions</strong></div>
      </div>

      <div class="requests-grid">
        <div class="request-row" *ngFor="let request of requests">
          <div>{{ request.username }}</div>
          <div>{{ request.email }}</div>
          <div>
            <button class="approve" (click)="approveRequest(request)">
              Approve
            </button>
            <button class="reject" (click)="rejectRequest(request)">
              Reject
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="group-requests">
      <h3>Group Join Requests</h3>

      <div class="request-row header-row">
        <div><strong>Username</strong></div>
        <div><strong>Groupname</strong></div>
        <div><strong>Actions</strong></div>
      </div>

      <div class="requests-grid">
        <div class="request-row" *ngFor="let request of groupRequests">
          <div>{{ request.username }}</div>
          <div>{{ request.groupName }}</div>
          <div>
            <button class="approve" (click)="approveGroupRequest(request)">
              Approve
            </button>
            <button class="reject" (click)="rejectGroupRequest(request)">
              Reject
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="all-users">
      <h3>All users</h3>

      <div class="request-row header-row">
        <div><strong>Username</strong></div>
        <div><strong>Email ID</strong></div>
        <div><strong>Actions</strong></div>
      </div>

      <div class="requests-grid">
        <div class="request-row" *ngFor="let user of allUsers">
          <div>{{ user.username }}</div>
          <div>{{ user.email }}</div>
          <div>
            <button class="reject" (click)="deleteUser(user.id)">DELETE</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- =================== MANAGE GROUPS (new) =================== -->
  <div *ngIf="currMode === 'group'" class="manage-groups" style="padding-top:12px;">
    <h3>Manage Groups</h3>

    <!-- loading / error / empty states -->
    <div *ngIf="loadingGroups" class="muted">Loading groups…</div>
    <div *ngIf="groupsError" class="error">{{ groupsError }}</div>
    <div *ngIf="!loadingGroups && !groupsError && groups?.length === 0" class="muted">
      No groups found.
    </div>

    <!-- groups list -->
    <ul *ngIf="!loadingGroups && !groupsError && groups?.length">
      <li *ngFor="let g of groups" style="margin:8px 0;">
        <strong>{{ g.name }}</strong>
        <span class="muted">
          • id: {{ g.id }}
          • channels: {{ g.channels?.length || 0 }}
          • members: {{ g.users?.length || 0 }}
        </span>
      </li>
    </ul>
  </div>
</div>
